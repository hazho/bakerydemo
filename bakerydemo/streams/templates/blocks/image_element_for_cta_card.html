{% load wagtailimages_tags wagtailcore_tags strings_tags %}
{% if "%" not in self.image.image.el_style.width and "%" not in self.image.image.el_style.height %}
    {% if self.image.image.el_style.width|to_int < 100 %}
        <!-- -1 -->
        {% image self.image.image width-75 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 200 %}
        <!-- 0 -->
        {% image self.image.image width-150 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 300 %}
        <!-- 1 -->
        {% image self.image.image width-200 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 400 %}
        <!-- 2 -->
        {% image self.image.image width-300 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 500 %}
        <!-- 3 -->
        {% image self.image.image width-400 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 600 %}
        <!-- 4 -->
        {% image self.image.image width-500 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 700 %}
        <!-- 5 -->
        {% image self.image.image width-600 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 800 %}
        <!-- 6 -->
        {% image self.image.image width-700 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 900 %}
        <!-- 7 -->
        {% image self.image.image width-800 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 1000 %}
        <!-- 8 -->
        {% image self.image.image width-900 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 1200 %}
        <!-- 9 -->
        {% image self.image.image width-1100 format-webp-lossless as img %}
    {% elif self.image.image.el_style.width|to_int < 1400 %}
        <!-- 10 -->
        {% image self.image.image width-1300 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 100 %}
        <!-- 11 -->
        {% image self.image.image height-75 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 200 %}
        <!-- 12 -->
        {% image self.image.image height-150 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 300 %}
        <!-- 13 -->
        {% image self.image.image height-200 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 400 %}
        <!-- 1 4-->
        {% image self.image.image height-300 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 500 %}
        <!-- 1 5-->
        {% image self.image.image height-400 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 600 %}
        <!-- 16 -->
        {% image self.image.image height-500 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 700 %}
        <!-- 17 -->
        {% image self.image.image height-600 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 800 %}
        <!-- 18 -->
        {% image self.image.image height-700 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 900 %}
        <!-- 19 -->
        {% image self.image.image height-800 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 1000 %}
        <!-- 20 -->
        {% image self.image.image height-900 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 1200 %}
        <!-- 21 -->
        {% image self.image.image height-1100 format-webp-lossless as img %}
    {% elif self.image.image.el_style.height|to_int < 1400 %}
        <!-- 22 -->
        {% image self.image.image height-1300 format-webp-lossless as img %}
    {% else %}
        <!-- 23 -->
        {% image self.image.image original format-webp-lossless as img %}
    {% endif %}
{% else %}
        <!-- 24 -->
        {% image self.image.image original format-webp-lossless as img %}
{% endif %}

{% if self.image.image.el_style.el_pg_link %} <a href="{{self.image.image.el_style.el_pg_link.url}}" class="link image_container" {% if self.image.image.el_style.new_tab %} target="_blank" {% endif %} >
{% elif self.image.image.el_style.el_url_link %} <a href="{{self.image.image.el_style.el_url_link}}" class="link image_container" {% if self.image.image.el_style.new_tab %} target="_blank" {% endif %} >
{% endif %} 

<img loading="lazy" src="{{ img.url }}" alt="{{ img.alt }}" 
                {% if self.image.el_style.el_id %} id="{{self.image.el_style.el_id}}" {% endif %}
                {% if self.image.el_style.hover_styling.title %} title="{{ self.image.el_style.hover_styling.title }}" {% endif %}
 class="image_element {{self.image.el_style.el_class}} {% include 'includes/mobile_desktop.html' %}"  
 style="
            {% if self.image.el_style.text_align %} text-align:{{self.image.el_style.text_align}};{% endif %}
            {% if self.image.el_style.direction == rtl %} direction:{{self.image.el_style.direction}}; unicode-bidi: isolate !important;{% endif %}
            {% if self.image.el_style.position %} position:{{self.image.el_style.position}}; {% endif %}
            {% if self.image.el_style.left %} left:{{self.image.el_style.left}}; {% endif %}
            {% if self.image.el_style.top %} top:{{self.image.el_style.top}}; {% endif %}
            {% if self.image.el_style.padding %} padding:{{self.image.el_style.padding}}; {% endif %}
            {% if self.image.el_style.margin %} margin:{{self.image.el_style.margin}}; {% endif %}
            {% if self.image.el_style.font_size %} font-size:{{self.image.el_style.font_size}}; {% endif %}
            {% if self.image.el_style.width %} width:{{self.image.el_style.width}};{% endif %}
            {% if self.image.el_style.height %} height:{{self.image.el_style.height}};{% endif %}
            {% if self.image.el_style.b_radius %} border-radius:{{self.image.el_style.b_radius}};{% endif %}
            {% if self.image.el_style.b_top %} border-top:{{self.image.el_style.b_top}};{% endif %}
            {% if self.image.el_style.b_right %} border-right:{{self.image.el_style.b_right}};{% endif %}
            {% if self.image.el_style.b_bottom %} border-bottom:{{self.image.el_style.b_bottom}};{% endif %}
            {% if self.image.el_style.b_left %} border-left:{{self.image.el_style.b_left}};{% endif %}
            {% if self.image.el_style.box_shadow %} box-shadow: {{self.image.el_style.box_shadow}} ;{% endif %}
            {% if self.image.el_style.overflow %} overflow: {{self.image.el_style.overflow}} ;{% endif %}
            {% if self.image.el_style.color %} color: {{self.image.el_style.color}} ;{% endif %}
            {% if self.image.el_style.use_bg_color %} background-color:{{self.image.el_style.bg_c}};{% endif %}
            {% if self.image.el_style.image %}{% image self.image.el_style.image original format-webp-lossless as img %}background-position: center;background-repeat: no-repeat;background-size: cover;background-image: url({{img.url}});background-attachment: {% if self.image.el_style.paralax %}fixed{% else %}scroll{% endif %}{% endif %}
        "/>
</a>